<body [ngClass]="{ 'login-bg': !showHeader }">
  <div class="app-layout"
    [ngClass]="{'sidebar-expanded': sidebarExpanded, 'no-sidebar': !authService.isLoggedIn() }">
    <nav class="sidebar" *ngIf="authService.isLoggedIn()">

      <div class="nav-menu-item" (click)="toggleSidebar()">
        <mat-icon>menu</mat-icon>

      </div>

      <div class="nav-item" *ngIf="isCandidate" routerLink="/user/profile/{{userName}}" routerLinkActive="active"
        [matTooltip]="!sidebarExpanded ? 'Perfil Profesional' : ''" [matTooltipPosition]="'right'"
        (click)="collapseSidebar()">
        <mat-icon>person</mat-icon>
        <span class="nav-text">Perfil Profesional</span>
      </div>

      <div class="nav-item" *ngIf="isCompany" routerLink="/company/profile/{{companyName}}" routerLinkActive="active"
        [matTooltip]="!sidebarExpanded ? 'Perfil Empresa' : ''" [matTooltipPosition]="'right'"
        (click)="collapseSidebar()">
        <mat-icon>person</mat-icon>
        <span class="nav-text">Perfil Empresa</span>
      </div>

      <div class="nav-item" *ngIf="isCandidate" routerLink="/offers/portal" routerLinkActive="active"
        [matTooltip]="!sidebarExpanded ? 'Ofertas' : ''" [matTooltipPosition]="'right'" (click)="collapseSidebar()">
        <mat-icon>work</mat-icon>
        <span class="nav-text">Ofertas</span>
      </div>

      <div class="nav-item" *ngIf="isCandidate" routerLink="/user/companies" routerLinkActive="active"
        [matTooltip]="!sidebarExpanded ? 'Empresas' : ''" [matTooltipPosition]="'right'" (click)="collapseSidebar()">
        <mat-icon>business</mat-icon>
        <span class="nav-text">Empresas</span>
      </div>

      <div class="nav-item" *ngIf="isCompany" routerLink="/company/myoffers" routerLinkActive="active"
        [matTooltip]="!sidebarExpanded ? 'Mis ofertas' : ''" [matTooltipPosition]="'right'" (click)="collapseSidebar()">
        <mat-icon>business_center</mat-icon>
        <span class="nav-text">Mis ofertas</span>
      </div>

      
      <div class="nav-item" *ngIf="isCompany" (click)="navigateToAddOffer(); collapseSidebar()"
        [matTooltip]="!sidebarExpanded ? 'Añadir Ofertas' : ''" 
        [matTooltipPosition]="'right'">
        <mat-icon>add_add</mat-icon>
        <span class="nav-text">Añadir Ofertas</span>
      </div>

      <div class="nav-item" *ngIf="isAdmin" routerLink="/admin/companies" routerLinkActive="active"
        [matTooltip]="!sidebarExpanded ? 'Empresas' : ''" [matTooltipPosition]="'right'" (click)="collapseSidebar()">
        <mat-icon>admin_panel_settings</mat-icon>
        <span class="nav-text">Empresas</span>
      </div>

      <div class="nav-item" *ngIf="isAdmin" routerLink="/admin/dashboard" routerLinkActive="active"
        [matTooltip]="!sidebarExpanded ? 'Dashboard' : ''" [matTooltipPosition]="'right'" (click)="collapseSidebar()">
        <mat-icon>analytics</mat-icon>
        <span class="nav-text">Dashboard</span>
      </div>

      <div class="nav-item" *ngIf="isAdmin" routerLink="/admin/tags" routerLinkActive="active"
        (click)="collapseSidebar()" [matTooltip]="!sidebarExpanded ? 'Etiquetas' : ''" [matTooltipPosition]="'right'">
        <mat-icon>label</mat-icon>
        <span class="nav-text">Etiquetas</span>
      </div>
    </nav>


    <main class="main-content" (click)="collapseSidebar()"
       [ngClass]="{ 'no-header': !showHeader }">
      <app-header *ngIf="showHeader"></app-header>
      <router-outlet></router-outlet>
    </main>

    <app-chat-button *ngIf="isCandidate || isCompany"></app-chat-button>
  </div>
</body>